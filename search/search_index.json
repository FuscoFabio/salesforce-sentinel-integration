{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"CCF_CODELESS_CONNECTOR/","title":"CodeLess Connector Framework (CCF)","text":"<p>Documentazione completa del CodeLess Connector Framework per l'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"CCF_CODELESS_CONNECTOR/#panoramica","title":"Panoramica","text":"<p>Il CodeLess Connector Framework (CCF) \u00e8 la soluzione raccomandata per setup rapido senza codice.</p>"},{"location":"CCF_CODELESS_CONNECTOR/#configurazione","title":"Configurazione","text":"<p>Vedi la documentazione completa nel repository per i dettagli di configurazione.</p>"},{"location":"CCF_CODELESS_CONNECTOR/#link-utili","title":"Link Utili","text":"<ul> <li>Documentazione Microsoft</li> <li>Guida Setup</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Guida per risolvere i problemi comuni nell'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"troubleshooting/#problemi-comuni","title":"Problemi Comuni","text":""},{"location":"troubleshooting/#nessun-dato-in-azure-sentinel","title":"Nessun Dato in Azure Sentinel","text":"<p>Sintomi: Non vedi eventi Salesforce in Log Analytics.</p> <p>Possibili Cause e Soluzioni:</p> <ol> <li>Event Monitoring non attivo abbastanza a lungo</li> <li>Event Monitoring richiede 24-48 ore per generare eventi</li> <li> <p>Soluzione: Attendi e verifica dopo 48 ore</p> </li> <li> <p>Credenziali OAuth non valide</p> </li> <li>Consumer Key o Secret errati</li> <li> <p>Soluzione: Verifica le credenziali nella Connected App</p> </li> <li> <p>Connector/Function/Logic App non configurato correttamente</p> </li> <li>Configurazione incompleta o errata</li> <li> <p>Soluzione: Rivedi la configurazione passo per passo</p> </li> <li> <p>Permessi insufficienti</p> </li> <li>L'utente non ha permessi per Event Log Files</li> <li> <p>Soluzione: Verifica Permission Sets e profili</p> </li> <li> <p>Problemi di rete/firewall</p> </li> <li>IP bloccati o restrizioni di rete</li> <li>Soluzione: Verifica Network Access in Salesforce e range IP Azure</li> </ol>"},{"location":"troubleshooting/#errori-di-autenticazione","title":"Errori di Autenticazione","text":"<p>Sintomi: Errori 401 Unauthorized o problemi di login.</p> <p>Possibili Cause e Soluzioni:</p> <ol> <li>Token OAuth scaduto</li> <li>I token hanno una scadenza</li> <li> <p>Soluzione: Implementa refresh token automatico</p> </li> <li> <p>Consumer Secret errato</p> </li> <li>Secret copiato incorrettamente</li> <li> <p>Soluzione: Rigenera il Consumer Secret se necessario</p> </li> <li> <p>Callback URL non corrispondente</p> </li> <li>URL nella Connected App non corrisponde</li> <li> <p>Soluzione: Verifica e aggiorna il Callback URL</p> </li> <li> <p>OAuth Scopes insufficienti</p> </li> <li>Scopes mancanti nella Connected App</li> <li>Soluzione: Aggiungi gli scopes necessari</li> </ol>"},{"location":"troubleshooting/#dati-incompleti-o-mancanti","title":"Dati Incompleti o Mancanti","text":"<p>Sintomi: Solo alcuni eventi vengono ricevuti, altri mancano.</p> <p>Possibili Cause e Soluzioni:</p> <ol> <li>Filtri troppo restrittivi</li> <li>Filtri che escludono eventi</li> <li> <p>Soluzione: Rivedi i filtri nella soluzione</p> </li> <li> <p>Eventi non ancora disponibili</p> </li> <li>Event Monitoring ha delay</li> <li> <p>Soluzione: Verifica la data degli eventi richiesti</p> </li> <li> <p>Rate Limits raggiunti</p> </li> <li>Troppe richieste API</li> <li> <p>Soluzione: Implementa retry con backoff esponenziale</p> </li> <li> <p>Errori durante il processing</p> </li> <li>Errori silenziosi nella trasformazione</li> <li>Soluzione: Controlla i log della soluzione</li> </ol>"},{"location":"troubleshooting/#errori-nella-functionlogic-app","title":"Errori nella Function/Logic App","text":"<p>Sintomi: Errori nelle esecuzioni della Function o Logic App.</p> <p>Possibili Cause e Soluzioni:</p> <ol> <li>Application Settings mancanti</li> <li>Variabili d'ambiente non configurate</li> <li> <p>Soluzione: Verifica tutte le Application Settings</p> </li> <li> <p>Timeout delle richieste</p> </li> <li>Richieste che impiegano troppo tempo</li> <li> <p>Soluzione: Ottimizza il codice o aumenta il timeout</p> </li> <li> <p>Errori di parsing JSON</p> </li> <li>Formato dati non valido</li> <li> <p>Soluzione: Verifica lo schema dei dati</p> </li> <li> <p>Problemi di connessione</p> </li> <li>Problemi di rete temporanei</li> <li>Soluzione: Implementa retry logic robusto</li> </ol>"},{"location":"troubleshooting/#costi-elevati","title":"Costi Elevati","text":"<p>Sintomi: Costi Azure pi\u00f9 alti del previsto.</p> <p>Possibili Cause e Soluzioni:</p> <ol> <li>Troppa ingestione dati</li> <li>Volume eventi superiore alle aspettative</li> <li> <p>Soluzione: Filtra eventi non necessari, ottimizza la frequenza</p> </li> <li> <p>Function eseguita troppo spesso</p> </li> <li>Timer trigger con frequenza eccessiva</li> <li> <p>Soluzione: Riduci la frequenza di esecuzione</p> </li> <li> <p>Retention troppo lunga</p> </li> <li>Dati conservati pi\u00f9 a lungo del necessario</li> <li>Soluzione: Riduci il periodo di retention</li> </ol>"},{"location":"troubleshooting/#diagnostica","title":"Diagnostica","text":""},{"location":"troubleshooting/#verifiche-step-by-step","title":"Verifiche Step-by-Step","text":"<ol> <li>Verifica Event Monitoring in Salesforce <pre><code>Setup \u2192 Event Monitoring \u2192 Event Log Files\n</code></pre></li> <li>Controlla che ci siano eventi recenti</li> <li> <p>Verifica i tipi di evento disponibili</p> </li> <li> <p>Verifica Connected App <pre><code>Setup \u2192 App Manager \u2192 [Your Connected App]\n</code></pre></p> </li> <li>Verifica che sia attiva</li> <li>Controlla OAuth Settings</li> <li> <p>Verifica Callback URL</p> </li> <li> <p>Verifica Credenziali</p> </li> <li>Testa le credenziali con una chiamata API manuale</li> <li> <p>Usa Postman o curl per verificare</p> </li> <li> <p>Verifica Log Analytics <pre><code>Salesforce_CL\n| take 10\n</code></pre></p> </li> <li>Esegui query per verificare dati</li> <li> <p>Controlla schema e campi</p> </li> <li> <p>Verifica Function/Logic App Logs</p> </li> <li>Controlla Application Insights</li> <li>Verifica errori e eccezioni</li> <li>Controlla metriche di esecuzione</li> </ol>"},{"location":"troubleshooting/#query-di-diagnostica","title":"Query di Diagnostica","text":"<p>Verifica ultimi eventi: <pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(1h)\n| order by TimeGenerated desc\n| take 10\n</code></pre></p> <p>Conta eventi per tipo: <pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(24h)\n| summarize count() by EventType_s\n</code></pre></p> <p>Verifica errori: <pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(24h)\n| where isnotempty(Error_s)\n| project TimeGenerated, Error_s, UserName_s\n</code></pre></p>"},{"location":"troubleshooting/#log-e-monitoraggio","title":"Log e Monitoraggio","text":""},{"location":"troubleshooting/#application-insights","title":"Application Insights","text":"<p>Configura Application Insights per: - Tracciare esecuzioni - Monitorare errori - Analizzare performance - Configurare alert</p>"},{"location":"troubleshooting/#log-di-salesforce","title":"Log di Salesforce","text":"<p>Controlla i log in Salesforce: - Setup \u2192 Debug Logs - Setup \u2192 Event Monitoring \u2192 Event Log Files</p>"},{"location":"troubleshooting/#log-di-azure","title":"Log di Azure","text":"<p>Controlla i log in Azure: - Function App \u2192 Log stream - Logic App \u2192 Run history - Log Analytics \u2192 Logs</p>"},{"location":"troubleshooting/#supporto","title":"Supporto","text":"<p>Se il problema persiste:</p> <ol> <li>Raccogli informazioni:</li> <li>Screenshot degli errori</li> <li>Log rilevanti</li> <li> <p>Configurazione (senza credenziali)</p> </li> <li> <p>Consulta:</p> </li> <li>Link Utili</li> <li>API Reference</li> <li> <p>Community e forum</p> </li> <li> <p>Verifica:</p> </li> <li>Documentazione ufficiale</li> <li>Changelog e aggiornamenti</li> <li>Known issues</li> </ol>"},{"location":"troubleshooting/#best-practices-per-prevenire-problemi","title":"Best Practices per Prevenire Problemi","text":"<ol> <li>Monitoraggio Proattivo: Configura alert per errori</li> <li>Logging Completo: Logga tutte le operazioni importanti</li> <li>Test Regolari: Verifica periodicamente che l'integrazione funzioni</li> <li>Documentazione: Mantieni documentazione aggiornata della configurazione</li> <li>Backup: Mantieni backup delle configurazioni</li> <li>Versioning: Usa versioning per il codice delle Function</li> </ol>"},{"location":"implementation/azure-function/","title":"Implementazione Azure Function","text":"<p>Guida completa per implementare l'integrazione Salesforce-Azure Sentinel usando Azure Function.</p>"},{"location":"implementation/azure-function/#panoramica","title":"Panoramica","text":"<p>Azure Function permette di creare una soluzione serverless personalizzata per recuperare eventi da Salesforce e inviarli a Azure Sentinel tramite Log Analytics.</p>"},{"location":"implementation/azure-function/#architettura","title":"Architettura","text":"<pre><code>Salesforce Event Log Files API\n    \u2193\nAzure Function (Timer Trigger)\n    \u2193\nTrasformazione Dati\n    \u2193\nLog Analytics Data Collector API\n    \u2193\nAzure Sentinel\n</code></pre>"},{"location":"implementation/azure-function/#prerequisiti","title":"Prerequisiti","text":"<ul> <li>Azure Subscription</li> <li>Azure Function App (Consumption o Premium Plan)</li> <li>Log Analytics Workspace con Azure Sentinel</li> <li>Credenziali Salesforce (Consumer Key/Secret)</li> <li>Workspace ID e Primary Key di Log Analytics</li> </ul>"},{"location":"implementation/azure-function/#passo-1-creare-azure-function-app","title":"Passo 1: Creare Azure Function App","text":"<ol> <li>Nel portale Azure, cerca \"Function App\"</li> <li>Clicca su Create</li> <li>Configura:</li> <li>Subscription: Seleziona la sottoscrizione</li> <li>Resource Group: Crea o seleziona un resource group</li> <li>Function App name: Nome univoco</li> <li>Publish: Code</li> <li>Runtime stack: .NET, Node.js, Python o PowerShell</li> <li>Version: Versione pi\u00f9 recente</li> <li>Region: Seleziona una regione</li> <li>Clicca su Review + Create \u2192 Create</li> </ol>"},{"location":"implementation/azure-function/#passo-2-configurare-application-settings","title":"Passo 2: Configurare Application Settings","text":"<p>Nella Function App, vai a Configuration \u2192 Application settings e aggiungi:</p> <pre><code>Salesforce__ConsumerKey=&lt;your-consumer-key&gt;\nSalesforce__ConsumerSecret=&lt;your-consumer-secret&gt;\nSalesforce__Username=&lt;salesforce-username&gt;\nSalesforce__Password=&lt;salesforce-password&gt;\nSalesforce__SecurityToken=&lt;security-token&gt;\nLogAnalytics__WorkspaceId=&lt;workspace-id&gt;\nLogAnalytics__WorkspaceKey=&lt;workspace-key&gt;\n</code></pre> <p>Nota: Per sicurezza, usa Key Vault References invece di valori in chiaro.</p>"},{"location":"implementation/azure-function/#passo-3-implementare-la-function","title":"Passo 3: Implementare la Function","text":""},{"location":"implementation/azure-function/#timer-trigger-function","title":"Timer Trigger Function","text":"<p>Crea una Function con Timer Trigger che esegue periodicamente (es. ogni 15 minuti):</p> <pre><code>[FunctionName(\"SalesforceToSentinel\")]\npublic static async Task Run(\n    [TimerTrigger(\"0 */15 * * * *\")] TimerInfo myTimer,\n    ILogger log)\n{\n    // Recupera eventi da Salesforce\n    // Trasforma i dati\n    // Invia a Log Analytics\n}\n</code></pre>"},{"location":"implementation/azure-function/#logica-di-recupero-eventi","title":"Logica di Recupero Eventi","text":"<ol> <li>Autenticazione OAuth con Salesforce</li> <li>Recupero Event Log Files tramite API</li> <li>Filtraggio eventi gi\u00e0 processati (usando timestamp)</li> <li>Trasformazione dati in formato Log Analytics</li> </ol>"},{"location":"implementation/azure-function/#invio-a-log-analytics","title":"Invio a Log Analytics","text":"<p>Usa l'API Data Collector di Log Analytics per inviare i dati:</p> <pre><code>var json = JsonConvert.SerializeObject(logEntries);\nvar content = new StringContent(json, Encoding.UTF8, \"application/json\");\nvar signature = BuildSignature(json, workspaceKey);\nclient.DefaultRequestHeaders.Add(\"Log-Type\", \"Salesforce_CL\");\nclient.DefaultRequestHeaders.Add(\"x-ms-date\", DateTime.UtcNow.ToString(\"r\"));\nclient.DefaultRequestHeaders.Add(\"Authorization\", signature);\nawait client.PostAsync(workspaceUrl, content);\n</code></pre>"},{"location":"implementation/azure-function/#passo-4-gestione-errori-e-retry","title":"Passo 4: Gestione Errori e Retry","text":"<p>Implementa: - Retry Logic: Per errori temporanei - Dead Letter Queue: Per eventi non processabili - Logging: Per monitoraggio e troubleshooting - Checkpointing: Per tracciare eventi gi\u00e0 processati</p>"},{"location":"implementation/azure-function/#passo-5-monitoraggio","title":"Passo 5: Monitoraggio","text":"<p>Configura: - Application Insights: Per metriche e log - Alert: Per errori e problemi - Dashboard: Per visualizzare lo stato dell'integrazione</p>"},{"location":"implementation/azure-function/#esempio-di-schema-dati","title":"Esempio di Schema Dati","text":"<pre><code>{\n  \"TimeGenerated\": \"2024-01-15T10:30:00Z\",\n  \"EventType\": \"LoginEvent\",\n  \"UserName\": \"user@example.com\",\n  \"SourceIP\": \"192.168.1.1\",\n  \"Browser\": \"Chrome\",\n  \"Platform\": \"Windows\",\n  \"LoginType\": \"Web\",\n  \"Success\": true\n}\n</code></pre>"},{"location":"implementation/azure-function/#ottimizzazioni","title":"Ottimizzazioni","text":"<ul> <li>Batch Processing: Raggruppa pi\u00f9 eventi in una singola chiamata</li> <li>Parallel Processing: Processa pi\u00f9 eventi in parallelo</li> <li>Caching: Cache token OAuth per ridurre chiamate</li> <li>Cost Optimization: Usa Consumption Plan per costi ottimali</li> </ul>"},{"location":"implementation/azure-function/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Errori di autenticazione: Verifica credenziali e token</li> <li>Nessun dato: Controlla timer trigger e log</li> <li>Errori API: Verifica rate limits e retry logic</li> <li>Costi elevati: Ottimizza frequenza esecuzione e batch size</li> </ul>"},{"location":"implementation/azure-function/#link-utili","title":"Link Utili","text":"<ul> <li>Azure Functions Documentation</li> <li>Log Analytics Data Collector API</li> <li>Salesforce Event Log Files API</li> </ul>"},{"location":"implementation/azure-ip-ranges/","title":"Gestione Range IP Azure","text":"<p>Guida per gestire i range IP di Azure quando si configura l'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"implementation/azure-ip-ranges/#panoramica","title":"Panoramica","text":"<p>Quando si configura Salesforce per inviare dati ad Azure, potrebbe essere necessario configurare le restrizioni IP per permettere solo le connessioni da Azure. Azure pubblica regolarmente i range IP utilizzati dai suoi servizi.</p>"},{"location":"implementation/azure-ip-ranges/#perche-gestire-i-range-ip","title":"Perch\u00e9 Gestire i Range IP","text":"<ul> <li>Sicurezza: Restringere l'accesso solo da IP Azure autorizzati</li> <li>Compliance: Soddisfare requisiti di sicurezza aziendali</li> <li>Controllo Accesso: Prevenire accessi non autorizzati</li> </ul>"},{"location":"implementation/azure-ip-ranges/#range-ip-azure","title":"Range IP Azure","text":"<p>Azure pubblica i range IP per: - Azure Functions - Azure Logic Apps - Azure Service Bus - Altri servizi Azure</p>"},{"location":"implementation/azure-ip-ranges/#ottenere-i-range-ip","title":"Ottenere i Range IP","text":"<ol> <li>Download JSON ufficiale:</li> <li>URL: <code>https://download.microsoft.com/download/7/1/D/71D86715-5596-4529-9B13-DA13F5F5FE99/ServiceTags_Public_20240115.json</code></li> <li> <p>Aggiornato settimanalmente</p> </li> <li> <p>Tramite Azure Portal:</p> </li> <li>Vai a Network \u2192 Service Tags</li> <li> <p>Cerca \"AzureCloud\" o servizi specifici</p> </li> <li> <p>Tramite API:    <pre><code>curl https://download.microsoft.com/download/7/1/D/71D86715-5596-4529-9B13-DA13F5F5FE99/ServiceTags_Public_20240115.json\n</code></pre></p> </li> </ol>"},{"location":"implementation/azure-ip-ranges/#configurazione-in-salesforce","title":"Configurazione in Salesforce","text":""},{"location":"implementation/azure-ip-ranges/#trusted-ip-ranges","title":"Trusted IP Ranges","text":"<ol> <li>Vai a Setup \u2192 Network Access</li> <li>Clicca su New per aggiungere range IP</li> <li>Aggiungi i range IP di Azure per la tua regione</li> <li>Salva le modifiche</li> </ol>"},{"location":"implementation/azure-ip-ranges/#esempio-range-ip-per-regioni-comuni","title":"Esempio Range IP per Regioni Comuni","text":"<p>West Europe: - 20.50.0.0/16 - 20.51.0.0/16 - (verifica sempre i range aggiornati)</p> <p>East US: - 20.42.0.0/16 - 20.43.0.0/16 - (verifica sempre i range aggiornati)</p> <p>Nota: I range IP cambiano regolarmente. Usa sempre i range pi\u00f9 recenti.</p>"},{"location":"implementation/azure-ip-ranges/#automatizzazione","title":"Automatizzazione","text":""},{"location":"implementation/azure-ip-ranges/#script-powershell-per-aggiornare-range-ip","title":"Script PowerShell per Aggiornare Range IP","text":"<pre><code># Scarica i Service Tags\n$serviceTags = Invoke-RestMethod -Uri \"https://download.microsoft.com/download/7/1/D/71D86715-5596-4529-9B13-DA13F5F5FE99/ServiceTags_Public_20240115.json\"\n\n# Filtra per regione (es. WestEurope)\n$westEuropeIPs = $serviceTags.values | \n    Where-Object { $_.name -like \"*WestEurope*\" } | \n    Select-Object -ExpandProperty properties | \n    Select-Object -ExpandProperty addressPrefixes\n\n# Output per configurazione Salesforce\n$westEuropeIPs | ForEach-Object { Write-Host $_ }\n</code></pre>"},{"location":"implementation/azure-ip-ranges/#script-python","title":"Script Python","text":"<pre><code>import requests\nimport json\n\n# Scarica Service Tags\nresponse = requests.get(\"https://download.microsoft.com/download/7/1/D/71D86715-5596-4529-9B13-DA13F5F5FE99/ServiceTags_Public_20240115.json\")\ndata = response.json()\n\n# Filtra per regione\nregion = \"WestEurope\"\nip_ranges = []\nfor value in data['values']:\n    if region in value['name']:\n        ip_ranges.extend(value['properties']['addressPrefixes'])\n\n# Output\nfor ip in ip_ranges:\n    print(ip)\n</code></pre>"},{"location":"implementation/azure-ip-ranges/#best-practices","title":"Best Practices","text":"<ol> <li>Aggiornamento Regolare: I range IP cambiano settimanalmente</li> <li>Monitoraggio: Configura alert per cambiamenti nei range IP</li> <li>Documentazione: Mantieni traccia dei range IP configurati</li> <li>Test: Verifica sempre che la configurazione funzioni dopo aggiornamenti</li> </ol>"},{"location":"implementation/azure-ip-ranges/#alternative-usare-private-endpoints","title":"Alternative: Usare Private Endpoints","text":"<p>Se possibile, considera l'uso di Azure Private Endpoints invece di range IP pubblici:</p> <ul> <li>Maggiore sicurezza</li> <li>Non richiede aggiornamenti frequenti dei range IP</li> <li>Comunicazione privata sulla rete Azure</li> </ul>"},{"location":"implementation/azure-ip-ranges/#troubleshooting","title":"Troubleshooting","text":""},{"location":"implementation/azure-ip-ranges/#problema-connessioni-bloccate","title":"Problema: Connessioni Bloccate","text":"<ol> <li>Verifica che i range IP siano aggiornati</li> <li>Controlla i log di Salesforce per IP bloccati</li> <li>Verifica la regione Azure corretta</li> </ol>"},{"location":"implementation/azure-ip-ranges/#problema-range-ip-troppo-ampi","title":"Problema: Range IP Troppo Ampi","text":"<ul> <li>Usa range IP specifici per regione invece di tutti i range Azure</li> <li>Considera l'uso di Private Endpoints</li> </ul>"},{"location":"implementation/azure-ip-ranges/#link-utili","title":"Link Utili","text":"<ul> <li>Azure IP Ranges and Service Tags</li> <li>Service Tags Documentation</li> <li>Salesforce Network Access</li> </ul>"},{"location":"implementation/kql-queries/","title":"Query KQL per Azure Sentinel","text":"<p>Raccolta di query KQL (Kusto Query Language) per analizzare gli eventi Salesforce in Azure Sentinel.</p>"},{"location":"implementation/kql-queries/#query-base","title":"Query Base","text":""},{"location":"implementation/kql-queries/#visualizzare-tutti-gli-eventi-recenti","title":"Visualizzare Tutti gli Eventi Recenti","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(24h)\n| project TimeGenerated, UserName_s, EventType_s, SourceIP_s, Browser_s, Platform_s\n| order by TimeGenerated desc\n</code></pre>"},{"location":"implementation/kql-queries/#contare-eventi-per-tipo","title":"Contare Eventi per Tipo","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(7d)\n| summarize count() by EventType_s\n| render columnchart\n</code></pre>"},{"location":"implementation/kql-queries/#eventi-per-utente","title":"Eventi per Utente","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(7d)\n| summarize EventCount = count() by UserName_s\n| order by EventCount desc\n| take 20\n</code></pre>"},{"location":"implementation/kql-queries/#query-di-sicurezza","title":"Query di Sicurezza","text":""},{"location":"implementation/kql-queries/#login-falliti","title":"Login Falliti","text":"<pre><code>Salesforce_CL\n| where EventType_s == \"LoginEvent\"\n| where Success_b == false\n| project TimeGenerated, UserName_s, SourceIP_s, FailureReason_s\n| order by TimeGenerated desc\n</code></pre>"},{"location":"implementation/kql-queries/#accessi-da-ip-sospetti","title":"Accessi da IP Sospetti","text":"<pre><code>Salesforce_CL\n| where EventType_s == \"LoginEvent\"\n| where SourceIP_s !startswith \"10.\" and SourceIP_s !startswith \"192.168.\"\n| summarize count() by SourceIP_s, UserName_s\n| order by count_ desc\n</code></pre>"},{"location":"implementation/kql-queries/#accessi-multipli-da-ip-diversi","title":"Accessi Multipli da IP Diversi","text":"<pre><code>Salesforce_CL\n| where EventType_s == \"LoginEvent\"\n| where TimeGenerated &gt; ago(1h)\n| summarize IPCount = dcount(SourceIP_s), IPs = make_set(SourceIP_s) by UserName_s\n| where IPCount &gt; 3\n| project UserName_s, IPCount, IPs\n</code></pre>"},{"location":"implementation/kql-queries/#accessi-fuori-orario","title":"Accessi Fuori Orario","text":"<pre><code>Salesforce_CL\n| where EventType_s == \"LoginEvent\"\n| where TimeGenerated &gt; ago(7d)\n| extend Hour = datetime_part(\"hour\", TimeGenerated)\n| where Hour &lt; 6 or Hour &gt; 22\n| summarize count() by UserName_s, Hour\n| order by count_ desc\n</code></pre>"},{"location":"implementation/kql-queries/#accessi-da-browserdevice-non-usuali","title":"Accessi da Browser/Device Non Usuali","text":"<pre><code>Salesforce_CL\n| where EventType_s == \"LoginEvent\"\n| where TimeGenerated &gt; ago(30d)\n| summarize \n    CommonBrowsers = make_set(Browser_s) by UserName_s\n| extend BrowserCount = array_length(CommonBrowsers)\n| where BrowserCount &gt; 3\n| project UserName_s, BrowserCount, CommonBrowsers\n</code></pre>"},{"location":"implementation/kql-queries/#query-di-analisi","title":"Query di Analisi","text":""},{"location":"implementation/kql-queries/#attivita-per-ora-del-giorno","title":"Attivit\u00e0 per Ora del Giorno","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(7d)\n| extend Hour = datetime_part(\"hour\", TimeGenerated)\n| summarize EventCount = count() by Hour\n| order by Hour asc\n| render timechart\n</code></pre>"},{"location":"implementation/kql-queries/#top-10-utenti-per-attivita","title":"Top 10 Utenti per Attivit\u00e0","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(7d)\n| summarize \n    LoginCount = countif(EventType_s == \"LoginEvent\"),\n    ApiCallCount = countif(EventType_s == \"ApiEvent\"),\n    TotalEvents = count()\n    by UserName_s\n| order by TotalEvents desc\n| take 10\n</code></pre>"},{"location":"implementation/kql-queries/#distribuzione-geografica-se-disponibile","title":"Distribuzione Geografica (se disponibile)","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(7d)\n| where isnotempty(Country_s)\n| summarize count() by Country_s\n| order by count_ desc\n| render piechart\n</code></pre>"},{"location":"implementation/kql-queries/#pattern-di-accesso-giornaliero","title":"Pattern di Accesso Giornaliero","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(30d)\n| where EventType_s == \"LoginEvent\"\n| summarize DailyLogins = count() by bin(TimeGenerated, 1d), UserName_s\n| render timechart\n</code></pre>"},{"location":"implementation/kql-queries/#query-per-alerting","title":"Query per Alerting","text":""},{"location":"implementation/kql-queries/#alert-troppi-login-falliti","title":"Alert: Troppi Login Falliti","text":"<pre><code>Salesforce_CL\n| where EventType_s == \"LoginEvent\"\n| where Success_b == false\n| where TimeGenerated &gt; ago(1h)\n| summarize FailedAttempts = count() by UserName_s\n| where FailedAttempts &gt; 5\n</code></pre>"},{"location":"implementation/kql-queries/#alert-nuovo-ip-per-utente","title":"Alert: Nuovo IP per Utente","text":"<pre><code>let KnownIPs = Salesforce_CL\n| where TimeGenerated between (ago(30d) .. ago(1h))\n| where EventType_s == \"LoginEvent\"\n| summarize KnownIPSet = make_set(SourceIP_s) by UserName_s;\nSalesforce_CL\n| where TimeGenerated &gt; ago(1h)\n| where EventType_s == \"LoginEvent\"\n| join kind=inner (KnownIPs) on UserName_s\n| where SourceIP_s !in (KnownIPSet)\n| project TimeGenerated, UserName_s, SourceIP_s, KnownIPSet\n</code></pre>"},{"location":"implementation/kql-queries/#alert-accesso-da-paese-non-usuale","title":"Alert: Accesso da Paese Non Usuale","text":"<pre><code>let UsualCountries = Salesforce_CL\n| where TimeGenerated between (ago(30d) .. ago(1h))\n| where EventType_s == \"LoginEvent\"\n| summarize CountrySet = make_set(Country_s) by UserName_s;\nSalesforce_CL\n| where TimeGenerated &gt; ago(1h)\n| where EventType_s == \"LoginEvent\"\n| where isnotempty(Country_s)\n| join kind=inner (UsualCountries) on UserName_s\n| where Country_s !in (CountrySet)\n| project TimeGenerated, UserName_s, Country_s, CountrySet\n</code></pre>"},{"location":"implementation/kql-queries/#query-di-correlazione","title":"Query di Correlazione","text":""},{"location":"implementation/kql-queries/#correlazione-con-altri-log-esempio-con-signinlogs","title":"Correlazione con Altri Log (esempio con SigninLogs)","text":"<pre><code>let SalesforceLogins = Salesforce_CL\n| where EventType_s == \"LoginEvent\"\n| where TimeGenerated &gt; ago(1h)\n| project TimeGenerated, UserName_s, SourceIP_s, EventType_s;\nSigninLogs\n| where TimeGenerated &gt; ago(1h)\n| project TimeGenerated, UserPrincipalName, IPAddress, AppDisplayName\n| join kind=inner (SalesforceLogins) \n    on $left.IPAddress == $right.SourceIP_s\n| project TimeGenerated, UserPrincipalName, IPAddress, UserName_s\n</code></pre>"},{"location":"implementation/kql-queries/#query-di-compliance-e-audit","title":"Query di Compliance e Audit","text":""},{"location":"implementation/kql-queries/#report-accessi-per-audit","title":"Report Accessi per Audit","text":"<pre><code>Salesforce_CL\n| where TimeGenerated between (startofday(ago(30d)) .. endofday(now()))\n| where EventType_s == \"LoginEvent\"\n| summarize \n    FirstLogin = min(TimeGenerated),\n    LastLogin = max(TimeGenerated),\n    LoginCount = count(),\n    UniqueIPs = dcount(SourceIP_s),\n    Platforms = make_set(Platform_s)\n    by UserName_s\n| order by LoginCount desc\n</code></pre>"},{"location":"implementation/kql-queries/#attivita-api-per-utente","title":"Attivit\u00e0 API per Utente","text":"<pre><code>Salesforce_CL\n| where EventType_s == \"ApiEvent\"\n| where TimeGenerated &gt; ago(7d)\n| summarize \n    ApiCallCount = count(),\n    UniqueEndpoints = dcount(Endpoint_s)\n    by UserName_s\n| order by ApiCallCount desc\n</code></pre>"},{"location":"implementation/kql-queries/#note","title":"Note","text":"<ul> <li>Sostituisci <code>Salesforce_CL</code> con il nome della tua tabella custom se diverso</li> <li>I nomi dei campi (es. <code>UserName_s</code>, <code>EventType_s</code>) potrebbero variare in base alla tua implementazione</li> <li>Aggiusta i filtri temporali (<code>ago(7d)</code>) in base alle tue esigenze</li> <li>Testa le query prima di usarle per alerting in produzione</li> </ul>"},{"location":"implementation/kql-queries/#link-utili","title":"Link Utili","text":"<ul> <li>Documentazione KQL</li> <li>KQL Quick Reference</li> <li>Azure Sentinel Query Examples</li> </ul>"},{"location":"introduction/architecture/","title":"Architettura","text":"<p>Panoramica dell'architettura dell'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"introduction/architecture/#architettura-generale","title":"Architettura Generale","text":"<p>L'integrazione segue un pattern di raccolta eventi da Salesforce e invio a Azure Sentinel per l'analisi e il monitoraggio della sicurezza.</p>"},{"location":"introduction/architecture/#componenti-principali","title":"Componenti Principali","text":""},{"location":"introduction/architecture/#salesforce","title":"Salesforce","text":"<ul> <li>Event Monitoring: Genera eventi di accesso (LoginEvent, LogoutEvent, ApiEvent)</li> <li>Connected App: Autenticazione OAuth per l'accesso alle API</li> <li>Event Log Files API: API per recuperare i log degli eventi</li> </ul>"},{"location":"introduction/architecture/#layer-di-integrazione","title":"Layer di Integrazione","text":"<p>Il layer di integrazione varia in base alla soluzione scelta:</p> <ul> <li>CCF: Connector nativo Azure Sentinel</li> <li>Azure Function: Funzione serverless per trasformazione e invio</li> <li>Logic App: Workflow orchestrato per la gestione degli eventi</li> <li>Syslog: Server Syslog per la raccolta centralizzata</li> </ul>"},{"location":"introduction/architecture/#azure-sentinel","title":"Azure Sentinel","text":"<ul> <li>Log Analytics Workspace: Storage dei log</li> <li>KQL Queries: Analisi e query sui dati</li> <li>Workbooks: Dashboard e visualizzazioni</li> <li>Alerting: Regole di allerta per eventi sospetti</li> </ul>"},{"location":"introduction/architecture/#flusso-dei-dati","title":"Flusso dei Dati","text":"<pre><code>Salesforce Event Monitoring\n    \u2193\nEvent Log Files API\n    \u2193\nLayer di Integrazione (CCF/Function/Logic App)\n    \u2193\nAzure Sentinel / Log Analytics\n    \u2193\nAnalisi e Monitoraggio\n</code></pre>"},{"location":"introduction/architecture/#pattern-di-integrazione","title":"Pattern di Integrazione","text":""},{"location":"introduction/architecture/#pattern-push-ccf-function-logic-app","title":"Pattern Push (CCF, Function, Logic App)","text":"<p>Salesforce \u2192 API Call \u2192 Integrazione \u2192 Azure Sentinel</p>"},{"location":"introduction/architecture/#pattern-pull-function-logic-app","title":"Pattern Pull (Function, Logic App)","text":"<p>Integrazione \u2192 Polling API Salesforce \u2192 Trasformazione \u2192 Azure Sentinel</p>"},{"location":"introduction/architecture/#pattern-syslog","title":"Pattern Syslog","text":"<p>Salesforce \u2192 Syslog Server \u2192 Azure Monitor Agent \u2192 Azure Sentinel</p>"},{"location":"introduction/architecture/#considerazioni-di-sicurezza","title":"Considerazioni di Sicurezza","text":"<ul> <li>Autenticazione OAuth: Sicurezza delle credenziali</li> <li>HTTPS: Comunicazione criptata</li> <li>Network Security: Restrizioni IP e firewall</li> <li>Secrets Management: Gestione sicura delle credenziali (Key Vault)</li> </ul>"},{"location":"introduction/architecture/#scalabilita","title":"Scalabilit\u00e0","text":"<ul> <li>Eventi Volume: Gestione di picchi di eventi</li> <li>Retry Logic: Gestione errori e retry</li> <li>Rate Limiting: Rispetto dei limiti API Salesforce</li> <li>Cost Optimization: Ottimizzazione dei costi Azure</li> </ul>"},{"location":"introduction/overview/","title":"Panoramica","text":""},{"location":"introduction/overview/#cose-questa-integrazione","title":"Cos'\u00e8 questa integrazione?","text":"<p>Questa integrazione permette di trasferire automaticamente i log di accesso generati da Salesforce verso Azure Sentinel, creando un'unica piattaforma centralizzata per il monitoraggio della sicurezza.</p>"},{"location":"introduction/overview/#perche-integrare-salesforce-con-azure-sentinel","title":"Perch\u00e9 integrare Salesforce con Azure Sentinel?","text":""},{"location":"introduction/overview/#vantaggi","title":"Vantaggi","text":"<ul> <li>Visibilit\u00e0 Centralizzata: Tutti i log di accesso in un'unico posto</li> <li>Analisi Avanzata: Query KQL per identificare pattern sospetti</li> <li>Alerting Automatico: Notifiche per accessi anomali</li> <li>Compliance: Tracciamento completo degli accessi per audit</li> <li>Correlazione Eventi: Integrare con altri log di sicurezza</li> </ul>"},{"location":"introduction/overview/#cosa-viene-monitorato","title":"Cosa viene monitorato?","text":""},{"location":"introduction/overview/#eventi-salesforce-supportati","title":"Eventi Salesforce Supportati","text":"<ul> <li>LoginEvent: Accessi utente a Salesforce</li> <li>LogoutEvent: Disconnessioni</li> <li>ApiEvent: Chiamate API (estendibile)</li> <li>Altri eventi configurabili</li> </ul>"},{"location":"introduction/overview/#dati-inclusi","title":"Dati Inclusi","text":"<ul> <li>Timestamp accesso</li> <li>Username e User ID</li> <li>Indirizzo IP</li> <li>Browser e piattaforma</li> <li>Tipo di login</li> <li>Geolocalizzazione (se disponibile)</li> </ul>"},{"location":"introduction/overview/#soluzioni-disponibili","title":"Soluzioni Disponibili","text":"<p>Il progetto offre 5 soluzioni diverse per soddisfare ogni esigenza:</p> <ol> <li>CodeLess Connector Framework (CCF) - Setup rapido, zero manutenzione</li> <li>Azure Function - Massima personalizzazione</li> <li>Azure Logic App - Low-code visuale</li> <li>Syslog + Azure Monitor Agent - Per infrastrutture esistenti</li> <li>Third-party SIEM Connector - Per soluzioni enterprise</li> </ol> <p>Vedi confronto completo \u2192</p>"},{"location":"introduction/overview/#prerequisiti","title":"Prerequisiti","text":""},{"location":"introduction/overview/#salesforce","title":"Salesforce","text":"<ul> <li>Licenza Enterprise, Unlimited o Performance Edition</li> <li>Event Monitoring abilitato</li> <li>Permessi per creare Connected App</li> </ul>"},{"location":"introduction/overview/#azure","title":"Azure","text":"<ul> <li>Sottoscrizione Azure attiva</li> <li>Azure Sentinel Workspace</li> <li>Permessi per creare risorse Azure</li> </ul>"},{"location":"introduction/overview/#prossimi-passi","title":"Prossimi Passi","text":"<ol> <li>Scegli una soluzione</li> <li>Configura Salesforce</li> <li>Configura Azure Sentinel</li> <li>Segui il Quick Start</li> </ol>"},{"location":"references/api/","title":"API Reference","text":"<p>Riferimento alle API utilizzate nell'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"references/api/#salesforce-apis","title":"Salesforce APIs","text":""},{"location":"references/api/#event-log-files-api","title":"Event Log Files API","text":"<p>Endpoint per recuperare i log degli eventi Salesforce.</p> <p>Base URL: <code>https://&lt;instance&gt;.salesforce.com/services/data/v&lt;version&gt;/sobjects/EventLogFile/</code></p>"},{"location":"references/api/#metodi-principali","title":"Metodi Principali","text":"<p>GET /EventLogFile</p> <p>Recupera la lista dei file di log disponibili.</p> <p>Parametri: - <code>q</code>: Query SOQL (es. <code>SELECT Id, EventType, LogDate FROM EventLogFile WHERE LogDate = TODAY</code>)</p> <p>Esempio: <pre><code>GET /services/data/v58.0/sobjects/EventLogFile/?q=SELECT+Id,EventType,LogDate+FROM+EventLogFile+WHERE+LogDate=TODAY\nAuthorization: Bearer &lt;access_token&gt;\n</code></pre></p> <p>GET /EventLogFile/{Id}/LogFile</p> <p>Scarica il contenuto di un file di log specifico.</p> <p>Esempio: <pre><code>GET /services/data/v58.0/sobjects/EventLogFile/{Id}/LogFile\nAuthorization: Bearer &lt;access_token&gt;\n</code></pre></p>"},{"location":"references/api/#oauth-20-authentication","title":"OAuth 2.0 Authentication","text":"<p>Token Endpoint: <code>https://&lt;instance&gt;.salesforce.com/services/oauth2/token</code></p> <p>Grant Type: Username-Password Flow</p> <p>Request: <pre><code>POST /services/oauth2/token\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=password\n&amp;client_id=&lt;consumer_key&gt;\n&amp;client_secret=&lt;consumer_secret&gt;\n&amp;username=&lt;username&gt;\n&amp;password=&lt;password&gt;&lt;security_token&gt;\n</code></pre></p> <p>Response: <pre><code>{\n  \"access_token\": \"00D...\",\n  \"instance_url\": \"https://yourinstance.salesforce.com\",\n  \"id\": \"https://login.salesforce.com/id/...\",\n  \"token_type\": \"Bearer\",\n  \"issued_at\": \"1234567890\",\n  \"signature\": \"...\"\n}\n</code></pre></p>"},{"location":"references/api/#azure-log-analytics-data-collector-api","title":"Azure Log Analytics Data Collector API","text":"<p>Endpoint per inviare dati a Log Analytics.</p> <p>Base URL: <code>https://&lt;workspace-id&gt;.ods.opinsights.azure.com/api/logs?api-version=2016-04-01</code></p>"},{"location":"references/api/#post-apilogs","title":"POST /api/logs","text":"<p>Invia dati a Log Analytics.</p> <p>Headers: - <code>Log-Type</code>: Nome della tabella custom (es. <code>Salesforce_CL</code>) - <code>x-ms-date</code>: Data/ora in formato RFC 1123 - <code>Authorization</code>: Signature HMAC-SHA256 - <code>Content-Type</code>: <code>application/json</code></p> <p>Request Body: <pre><code>[\n  {\n    \"TimeGenerated\": \"2024-01-15T10:30:00Z\",\n    \"EventType\": \"LoginEvent\",\n    \"UserName\": \"user@example.com\",\n    \"SourceIP\": \"192.168.1.1\"\n  }\n]\n</code></pre></p> <p>Esempio: <pre><code>POST /api/logs?api-version=2016-04-01\nLog-Type: Salesforce_CL\nx-ms-date: Mon, 15 Jan 2024 10:30:00 GMT\nAuthorization: SharedKey &lt;workspace-id&gt;:&lt;signature&gt;\nContent-Type: application/json\n\n[{\"TimeGenerated\":\"2024-01-15T10:30:00Z\",\"EventType\":\"LoginEvent\",\"UserName\":\"user@example.com\",\"SourceIP\":\"192.168.1.1\"}]\n</code></pre></p>"},{"location":"references/api/#generazione-signature","title":"Generazione Signature","text":"<pre><code>string signature = BuildSignature(\n    jsonContent,\n    workspaceKey,\n    \"POST\",\n    contentLength,\n    \"application/json\",\n    date,\n    \"/api/logs\"\n);\n\nstring BuildSignature(string content, string key, string method, int contentLength, string contentType, string date, string resource)\n{\n    string stringToSign = $\"{method}\\n{contentLength}\\n{contentType}\\nx-ms-date:{date}\\n{resource}\";\n    byte[] keyBytes = Convert.FromBase64String(key);\n    byte[] messageBytes = Encoding.UTF8.GetBytes(stringToSign);\n    using (var hmac = new HMACSHA256(keyBytes))\n    {\n        byte[] hash = hmac.ComputeHash(messageBytes);\n        return Convert.ToBase64String(hash);\n    }\n}\n</code></pre>"},{"location":"references/api/#azure-service-management-api","title":"Azure Service Management API","text":""},{"location":"references/api/#get-service-tags","title":"Get Service Tags","text":"<p>Recupera i range IP di Azure.</p> <p>Endpoint: <code>https://management.azure.com/subscriptions/{subscriptionId}/providers/Microsoft.Network/locations/{location}/serviceTagDetails?api-version=2021-05-01</code></p> <p>Esempio: <pre><code>GET /subscriptions/{subscriptionId}/providers/Microsoft.Network/locations/westeurope/serviceTagDetails?api-version=2021-05-01\nAuthorization: Bearer &lt;access_token&gt;\n</code></pre></p>"},{"location":"references/api/#rate-limits","title":"Rate Limits","text":""},{"location":"references/api/#salesforce","title":"Salesforce","text":"<ul> <li>API Requests: 15,000 per 24 ore (varia per licenza)</li> <li>Concurrent Requests: 25 simultanee</li> <li>Event Log Files: Disponibili dopo 24-48 ore</li> </ul>"},{"location":"references/api/#azure-log-analytics","title":"Azure Log Analytics","text":"<ul> <li>Data Ingestion: Fino a 6 GB/minuto per workspace</li> <li>API Calls: 500 richieste/minuto</li> <li>Payload Size: Max 30 MB per richiesta</li> </ul>"},{"location":"references/api/#error-handling","title":"Error Handling","text":""},{"location":"references/api/#salesforce-api-errors","title":"Salesforce API Errors","text":"<p>401 Unauthorized: - Token scaduto o non valido - Soluzione: Rinnova il token OAuth</p> <p>403 Forbidden: - Permessi insufficienti - Soluzione: Verifica Permission Sets</p> <p>429 Too Many Requests: - Rate limit superato - Soluzione: Implementa retry con backoff esponenziale</p>"},{"location":"references/api/#azure-log-analytics-errors","title":"Azure Log Analytics Errors","text":"<p>400 Bad Request: - Formato dati non valido - Soluzione: Verifica schema JSON</p> <p>401 Unauthorized: - Signature non valida - Soluzione: Verifica workspace key e algoritmo HMAC</p>"},{"location":"references/api/#link-utili","title":"Link Utili","text":"<ul> <li>Salesforce REST API Documentation</li> <li>Event Log Files API</li> <li>Log Analytics Data Collector API</li> <li>Azure Service Tags API</li> </ul>"},{"location":"references/links/","title":"Link Utili","text":"<p>Raccolta di link utili per l'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"references/links/#documentazione-ufficiale","title":"Documentazione Ufficiale","text":""},{"location":"references/links/#salesforce","title":"Salesforce","text":"<ul> <li>Salesforce Event Monitoring</li> <li>Event Log Files API</li> <li>Connected Apps</li> <li>OAuth 2.0 Authentication</li> </ul>"},{"location":"references/links/#azure","title":"Azure","text":"<ul> <li>Azure Sentinel Documentation</li> <li>Log Analytics Workspace</li> <li>Azure Functions</li> <li>Azure Logic Apps</li> <li>Log Analytics Data Collector API</li> </ul>"},{"location":"references/links/#azure-sentinel-connectors","title":"Azure Sentinel Connectors","text":"<ul> <li>CodeLess Connector Framework</li> <li>Data Connectors Overview</li> <li>Custom Connectors</li> </ul>"},{"location":"references/links/#query-e-analisi","title":"Query e Analisi","text":"<ul> <li>KQL Documentation</li> <li>KQL Quick Reference</li> <li>Azure Sentinel Hunting Queries</li> <li>KQL Playground</li> </ul>"},{"location":"references/links/#sicurezza-e-compliance","title":"Sicurezza e Compliance","text":"<ul> <li>Azure IP Ranges and Service Tags</li> <li>Azure Service Tags</li> <li>Azure Key Vault</li> <li>Salesforce Security Best Practices</li> </ul>"},{"location":"references/links/#community-e-supporto","title":"Community e Supporto","text":"<ul> <li>Azure Sentinel Community</li> <li>Salesforce Developer Community</li> <li>Stack Overflow - Azure Sentinel</li> <li>Stack Overflow - Salesforce</li> </ul>"},{"location":"references/links/#strumenti-e-risorse","title":"Strumenti e Risorse","text":"<ul> <li>Postman Collection per Salesforce API</li> <li>Azure Portal</li> <li>Salesforce Setup</li> <li>Azure Pricing Calculator</li> </ul>"},{"location":"references/links/#github-e-repository","title":"GitHub e Repository","text":"<ul> <li>Azure Sentinel GitHub</li> <li>Salesforce GitHub</li> <li>Azure Functions Samples</li> </ul>"},{"location":"references/links/#blog-e-articoli","title":"Blog e Articoli","text":"<ul> <li>Azure Sentinel Blog</li> <li>Salesforce Developer Blog</li> <li>Microsoft Security Blog</li> </ul>"},{"location":"references/links/#training-e-learning","title":"Training e Learning","text":"<ul> <li>Microsoft Learn - Azure Sentinel</li> <li>Trailhead - Salesforce Security</li> <li>Azure Sentinel Learning Path</li> </ul>"},{"location":"references/links/#pricing-e-costi","title":"Pricing e Costi","text":"<ul> <li>Azure Sentinel Pricing</li> <li>Log Analytics Pricing</li> <li>Azure Functions Pricing</li> <li>Salesforce Event Monitoring Pricing</li> </ul>"},{"location":"references/links/#api-reference","title":"API Reference","text":"<ul> <li>Salesforce REST API</li> <li>Azure REST API Reference</li> <li>Log Analytics REST API</li> </ul>"},{"location":"setup/azure-sentinel/","title":"Configurazione Azure Sentinel","text":"<p>La configurazione di Azure Sentinel varia in base alla soluzione scelta.</p>"},{"location":"setup/azure-sentinel/#prerequisiti","title":"Prerequisiti","text":"<ul> <li>Sottoscrizione Azure attiva</li> <li>Permessi di Contributor o Owner sulla sottoscrizione</li> <li>Log Analytics Workspace esistente o da creare</li> <li>Azure Sentinel abilitato sul workspace</li> </ul>"},{"location":"setup/azure-sentinel/#passo-1-creare-log-analytics-workspace","title":"Passo 1: Creare Log Analytics Workspace","text":"<ol> <li>Accedi al Portale Azure</li> <li>Cerca \"Log Analytics workspaces\"</li> <li>Clicca su Create</li> <li>Compila i campi:</li> <li>Subscription: Seleziona la sottoscrizione</li> <li>Resource Group: Crea o seleziona un resource group</li> <li>Name: Nome del workspace (es. \"salesforce-sentinel-ws\")</li> <li>Region: Seleziona una regione</li> <li>Clicca su Review + Create \u2192 Create</li> </ol>"},{"location":"setup/azure-sentinel/#passo-2-abilitare-azure-sentinel","title":"Passo 2: Abilitare Azure Sentinel","text":"<ol> <li>Nel portale Azure, cerca \"Azure Sentinel\"</li> <li>Clicca su Create</li> <li>Seleziona il Log Analytics Workspace creato</li> <li>Clicca su Add</li> </ol>"},{"location":"setup/azure-sentinel/#passo-3-configurazione-per-soluzione","title":"Passo 3: Configurazione per Soluzione","text":""},{"location":"setup/azure-sentinel/#per-ccf-codeless-connector-framework","title":"Per CCF (CodeLess Connector Framework)","text":"<ol> <li>In Azure Sentinel, vai a Data connectors</li> <li>Cerca \"Salesforce\" o il connector specifico</li> <li>Segui la procedura guidata del connector</li> <li>Configura le credenziali Salesforce ottenute dalla configurazione</li> <li>Abilita il connector</li> </ol>"},{"location":"setup/azure-sentinel/#per-azure-function","title":"Per Azure Function","text":"<ol> <li>Crea un'Azure Function App (vedi Implementazione Azure Function)</li> <li>Configura Application Settings con:</li> <li>Credenziali Salesforce</li> <li>Workspace ID e Key di Log Analytics</li> <li>Configura la Function per inviare dati a Log Analytics</li> </ol>"},{"location":"setup/azure-sentinel/#per-logic-app","title":"Per Logic App","text":"<ol> <li>Crea un'Azure Logic App</li> <li>Configura i connettori Salesforce e Azure Monitor</li> <li>Imposta il workflow per l'integrazione</li> <li>Configura le credenziali necessarie</li> </ol>"},{"location":"setup/azure-sentinel/#passo-4-verificare-ricezione-dati","title":"Passo 4: Verificare Ricezione Dati","text":"<ol> <li>In Azure Sentinel, vai a Logs</li> <li>Esegui una query per verificare i dati:    <pre><code>Salesforce_CL\n| take 10\n</code></pre></li> <li>Se non vedi dati, verifica:</li> <li>Configurazione del connector/function/logic app</li> <li>Credenziali e permessi</li> <li>Rete e firewall</li> </ol>"},{"location":"setup/azure-sentinel/#passo-5-configurare-tabelle-custom-se-necessario","title":"Passo 5: Configurare Tabelle Custom (se necessario)","text":"<p>Se usi Azure Function o Logic App, potresti dover creare tabelle custom:</p> <ol> <li>Vai a Log Analytics workspace \u2192 Tables</li> <li>Crea una tabella custom se necessario</li> <li>Configura lo schema dei dati</li> </ol>"},{"location":"setup/azure-sentinel/#configurazioni-avanzate","title":"Configurazioni Avanzate","text":""},{"location":"setup/azure-sentinel/#data-retention","title":"Data Retention","text":"<ol> <li>Vai a Log Analytics workspace \u2192 Usage and estimated costs</li> <li>Configura la retention dei dati (default 30 giorni, fino a 2 anni)</li> </ol>"},{"location":"setup/azure-sentinel/#network-security","title":"Network Security","text":"<ul> <li>Configura Private Endpoints se necessario</li> <li>Restringi l'accesso tramite Network Access Control</li> <li>Configura IP Restrictions se applicabile</li> </ul>"},{"location":"setup/azure-sentinel/#cost-management","title":"Cost Management","text":"<ul> <li>Monitora l'ingestione dati in Usage and estimated costs</li> <li>Configura Data Collection Rules per ottimizzare i costi</li> <li>Considera Commitment Tiers per volumi elevati</li> </ul>"},{"location":"setup/azure-sentinel/#link-utili","title":"Link Utili","text":"<ul> <li>Documentazione Azure Sentinel</li> <li>Log Analytics Workspace</li> <li>Data Connectors</li> </ul>"},{"location":"setup/quick-start/","title":"Quick Start","text":"<p>Guida rapida per iniziare con l'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"setup/quick-start/#panoramica","title":"Panoramica","text":"<p>Questa guida ti aiuter\u00e0 a configurare l'integrazione in pochi passaggi. Il tempo stimato \u00e8 di 30-60 minuti.</p>"},{"location":"setup/quick-start/#passo-1-scegliere-la-soluzione","title":"Passo 1: Scegliere la Soluzione","text":"<p>Scegli la soluzione pi\u00f9 adatta alle tue esigenze:</p> <ul> <li>CCF: Setup pi\u00f9 rapido, zero codice (consigliato per iniziare)</li> <li>Azure Function: Massima personalizzazione</li> <li>Logic App: Approccio low-code visuale</li> </ul> <p>Vedi Panoramica Soluzioni per il confronto completo.</p>"},{"location":"setup/quick-start/#passo-2-configurare-salesforce","title":"Passo 2: Configurare Salesforce","text":"<ol> <li>Abilita Event Monitoring in Salesforce</li> <li>Crea una Connected App</li> <li>Ottieni Consumer Key e Consumer Secret</li> <li>Verifica che Event Monitoring generi eventi</li> </ol> <p>Tempo stimato: 15-20 minuti</p> <p>Vedi Configurazione Salesforce per i dettagli completi.</p>"},{"location":"setup/quick-start/#passo-3-configurare-azure-sentinel","title":"Passo 3: Configurare Azure Sentinel","text":"<ol> <li>Crea un Log Analytics Workspace</li> <li>Abilita Azure Sentinel sul workspace</li> <li>Configura il connector o la soluzione scelta</li> <li>Verifica la ricezione dei dati</li> </ol> <p>Tempo stimato: 10-15 minuti</p> <p>Vedi Configurazione Azure Sentinel per i dettagli completi.</p>"},{"location":"setup/quick-start/#passo-4-verificare-lintegrazione","title":"Passo 4: Verificare l'Integrazione","text":""},{"location":"setup/quick-start/#verifica-dati-in-azure-sentinel","title":"Verifica Dati in Azure Sentinel","text":"<ol> <li>Apri Azure Sentinel \u2192 Logs</li> <li>Esegui la query:    <pre><code>Salesforce_CL\n| take 10\n| project TimeGenerated, UserName_s, EventType_s, SourceIP_s\n</code></pre></li> <li>Verifica che i dati siano presenti</li> </ol>"},{"location":"setup/quick-start/#verifica-eventi-recenti","title":"Verifica Eventi Recenti","text":"<pre><code>Salesforce_CL\n| where TimeGenerated &gt; ago(1h)\n| summarize count() by EventType_s\n| render columnchart\n</code></pre>"},{"location":"setup/quick-start/#passo-5-configurare-query-e-alert-opzionale","title":"Passo 5: Configurare Query e Alert (Opzionale)","text":"<ol> <li>Crea query KQL per analisi specifiche</li> <li>Configura regole di allerta per eventi sospetti</li> <li>Crea dashboard per il monitoraggio</li> </ol> <p>Vedi Query KQL per esempi.</p>"},{"location":"setup/quick-start/#checklist-completa","title":"Checklist Completa","text":"<ul> <li>[ ] Event Monitoring abilitato in Salesforce</li> <li>[ ] Connected App creata con OAuth</li> <li>[ ] Credenziali (Consumer Key/Secret) salvate</li> <li>[ ] Log Analytics Workspace creato</li> <li>[ ] Azure Sentinel abilitato</li> <li>[ ] Connector/Soluzione configurata</li> <li>[ ] Dati visibili in Log Analytics</li> <li>[ ] Query di verifica eseguite con successo</li> </ul>"},{"location":"setup/quick-start/#troubleshooting-rapido","title":"Troubleshooting Rapido","text":""},{"location":"setup/quick-start/#nessun-dato-visibile","title":"Nessun dato visibile","text":"<ol> <li>Verifica che Event Monitoring sia attivo da almeno 24-48 ore</li> <li>Controlla le credenziali OAuth</li> <li>Verifica i log della soluzione (Function/Logic App)</li> <li>Controlla i permessi e la configurazione di rete</li> </ol>"},{"location":"setup/quick-start/#errori-di-autenticazione","title":"Errori di autenticazione","text":"<ol> <li>Verifica Consumer Key e Secret</li> <li>Controlla Callback URL nella Connected App</li> <li>Verifica OAuth Scopes configurati</li> <li>Controlla che la Connected App sia attiva</li> </ol>"},{"location":"setup/quick-start/#dati-incompleti","title":"Dati incompleti","text":"<ol> <li>Verifica che Event Monitoring includa gli eventi necessari</li> <li>Controlla i filtri nella soluzione</li> <li>Verifica i limiti API di Salesforce</li> </ol>"},{"location":"setup/quick-start/#prossimi-passi","title":"Prossimi Passi","text":"<ul> <li>Configurare query KQL avanzate</li> <li>Gestire range IP Azure</li> <li>Personalizzare l'implementazione</li> <li>Risolvere problemi comuni</li> </ul>"},{"location":"setup/quick-start/#supporto","title":"Supporto","text":"<p>Per problemi o domande: - Consulta la sezione Troubleshooting - Verifica i Link Utili - Controlla la Documentazione Microsoft</p>"},{"location":"setup/salesforce/","title":"Configurazione Salesforce","text":"<p>La configurazione Salesforce \u00e8 identica per tutte le soluzioni.</p>"},{"location":"setup/salesforce/#prerequisiti","title":"Prerequisiti","text":"<ul> <li>Licenza Salesforce Enterprise, Unlimited o Performance Edition</li> <li>Event Monitoring abilitato</li> <li>Permessi di amministratore per creare Connected App</li> <li>Accesso a Setup \u2192 Event Monitoring</li> </ul>"},{"location":"setup/salesforce/#passo-1-abilitare-event-monitoring","title":"Passo 1: Abilitare Event Monitoring","text":"<ol> <li>Accedi a Setup in Salesforce</li> <li>Cerca \"Event Monitoring\" nella barra di ricerca</li> <li>Vai a Event Monitoring Settings</li> <li>Abilita Event Monitoring se non gi\u00e0 attivo</li> <li>Verifica che Event Log Files sia abilitato</li> </ol>"},{"location":"setup/salesforce/#passo-2-creare-connected-app","title":"Passo 2: Creare Connected App","text":"<ol> <li>Vai a Setup \u2192 App Manager</li> <li>Clicca su New Connected App</li> <li>Compila i campi obbligatori:</li> <li>Connected App Name: Nome descrittivo (es. \"Azure Sentinel Integration\")</li> <li>API Name: Nome API (generato automaticamente)</li> <li>Contact Email: La tua email</li> <li>Abilita Enable OAuth Settings</li> <li>Configura Callback URL: </li> <li>Per CCF: URL fornito da Azure Sentinel</li> <li>Per Function/Logic App: URL della tua funzione/app</li> <li>Seleziona OAuth Scopes:</li> <li><code>Manage user data via APIs (api)</code></li> <li><code>Perform requests on your behalf at any time (refresh_token, offline_access)</code></li> <li><code>Access the identity URL service (id, profile, email, address, phone)</code></li> <li>Abilita Require Secret for Web Server Flow</li> <li>Salva e attendi alcuni minuti per la propagazione</li> </ol>"},{"location":"setup/salesforce/#passo-3-ottenere-credenziali","title":"Passo 3: Ottenere Credenziali","text":"<p>Dopo la creazione della Connected App:</p> <ol> <li>Vai alla Connected App appena creata</li> <li>Clicca su Manage \u2192 Edit Policies</li> <li>Configura le policy di sicurezza:</li> <li>Permitted Users: \"All users may self-authorize\" o \"Admin approved users are pre-authorized\"</li> <li>IP Relaxation: \"Relax IP restrictions\" (se necessario)</li> <li>Vai a API (Enable OAuth Settings) \u2192 View</li> <li>Copia:</li> <li>Consumer Key (Client ID)</li> <li>Consumer Secret (Client Secret)</li> </ol>"},{"location":"setup/salesforce/#passo-4-configurare-permessi-api","title":"Passo 4: Configurare Permessi API","text":"<ol> <li>Vai a Setup \u2192 Users \u2192 Permission Sets</li> <li>Crea o modifica un Permission Set</li> <li>Aggiungi i permessi necessari:</li> <li>API Enabled</li> <li>View Event Log Files</li> <li>Assegna il Permission Set agli utenti che eseguiranno l'integrazione</li> </ol>"},{"location":"setup/salesforce/#passo-5-verificare-event-monitoring","title":"Passo 5: Verificare Event Monitoring","text":"<ol> <li>Vai a Setup \u2192 Event Monitoring \u2192 Event Log Files</li> <li>Verifica che ci siano eventi recenti</li> <li>Controlla che gli eventi includano:</li> <li>LoginEvent</li> <li>LogoutEvent</li> <li>ApiEvent (se necessario)</li> </ol>"},{"location":"setup/salesforce/#note-importanti","title":"Note Importanti","text":"<ul> <li>Le credenziali OAuth sono sensibili: conservale in modo sicuro</li> <li>Il Consumer Secret viene mostrato solo una volta: salvalo immediatamente</li> <li>Event Monitoring pu\u00f2 avere un delay di 24-48 ore per l'attivazione</li> <li>Alcuni eventi potrebbero non essere disponibili immediatamente</li> </ul>"},{"location":"setup/salesforce/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Event Monitoring non disponibile: Verifica la licenza Salesforce</li> <li>Nessun evento visibile: Attendi 24-48 ore dopo l'abilitazione</li> <li>Errori OAuth: Verifica Callback URL e OAuth Scopes</li> <li>Permessi insufficienti: Verifica Permission Sets e profili utente</li> </ul>"},{"location":"solutions/azure-function/","title":"Azure Function","text":"<p>Soluzione basata su Azure Function per l'integrazione Salesforce-Azure Sentinel con massima personalizzazione.</p>"},{"location":"solutions/azure-function/#panoramica","title":"Panoramica","text":"<p>Azure Function \u00e8 la soluzione consigliata quando hai bisogno di controllo completo sul processo di integrazione e personalizzazione avanzata della logica di trasformazione dei dati.</p>"},{"location":"solutions/azure-function/#caratteristiche","title":"Caratteristiche","text":"<ul> <li>Massima Personalizzazione: Controllo completo sulla logica di trasformazione</li> <li>Scalabilit\u00e0: Gestione automatica del carico di lavoro</li> <li>Costi Ottimizzati: Paghi solo per l'esecuzione</li> <li>Monitoraggio Integrato: Log e metriche in Azure Monitor</li> </ul>"},{"location":"solutions/azure-function/#prerequisiti","title":"Prerequisiti","text":"<ul> <li>Azure Subscription</li> <li>Azure Function App</li> <li>Azure Sentinel Workspace</li> <li>Configurazione Salesforce completata</li> </ul>"},{"location":"solutions/azure-function/#implementazione","title":"Implementazione","text":"<p>Vedi la sezione Implementazione Azure Function per i dettagli tecnici.</p>"},{"location":"solutions/azure-function/#link-utili","title":"Link Utili","text":"<ul> <li>Documentazione Azure Functions</li> <li>Azure Function Pricing</li> </ul>"},{"location":"solutions/ccf/","title":"CodeLess Connector Framework (CCF)","text":"<p>Documentazione completa del CodeLess Connector Framework per l'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"solutions/ccf/#panoramica","title":"Panoramica","text":"<p>Il CodeLess Connector Framework (CCF) \u00e8 la soluzione raccomandata per setup rapido senza codice.</p>"},{"location":"solutions/ccf/#configurazione","title":"Configurazione","text":"<p>Vedi la documentazione completa nel repository per i dettagli di configurazione.</p>"},{"location":"solutions/ccf/#link-utili","title":"Link Utili","text":"<ul> <li>Documentazione Microsoft</li> </ul>"},{"location":"solutions/logic-app/","title":"Azure Logic App","text":"<p>Soluzione low-code basata su Azure Logic App per l'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"solutions/logic-app/#panoramica","title":"Panoramica","text":"<p>Azure Logic App offre un approccio visuale e low-code per integrare Salesforce con Azure Sentinel, ideale per team che preferiscono configurazione grafica rispetto alla scrittura di codice.</p>"},{"location":"solutions/logic-app/#caratteristiche","title":"Caratteristiche","text":"<ul> <li>Low-Code: Configurazione visuale tramite designer</li> <li>Template ARM: Deployment rapido con template predefiniti</li> <li>Connettori Integrati: Connettori nativi per Salesforce e Azure Sentinel</li> <li>Workflow Visuale: Design del flusso di lavoro tramite interfaccia grafica</li> </ul>"},{"location":"solutions/logic-app/#prerequisiti","title":"Prerequisiti","text":"<ul> <li>Azure Subscription</li> <li>Azure Logic App</li> <li>Azure Sentinel Workspace</li> <li>Configurazione Salesforce completata</li> </ul>"},{"location":"solutions/logic-app/#deployment","title":"Deployment","text":"<p>Il progetto include template ARM per il deployment rapido della Logic App.</p>"},{"location":"solutions/logic-app/#link-utili","title":"Link Utili","text":"<ul> <li>Documentazione Azure Logic Apps</li> <li>Logic Apps Connectors</li> </ul>"},{"location":"solutions/other/","title":"Altre Soluzioni","text":"<p>Panoramica delle soluzioni alternative per l'integrazione Salesforce-Azure Sentinel.</p>"},{"location":"solutions/other/#soluzioni-disponibili","title":"Soluzioni Disponibili","text":""},{"location":"solutions/other/#syslog-azure-monitor-agent","title":"Syslog + Azure Monitor Agent","text":"<p>Soluzione per infrastrutture esistenti che utilizzano gi\u00e0 Syslog.</p> <p>Caratteristiche: - Integrazione con infrastrutture Syslog esistenti - Azure Monitor Agent per la raccolta - Configurazione server Syslog richiesta</p> <p>Quando usarla: - Hai gi\u00e0 un'infrastruttura Syslog - Preferisci un approccio basato su agent - Hai requisiti di rete specifici</p>"},{"location":"solutions/other/#third-party-siem-connector","title":"Third-party SIEM Connector","text":"<p>Soluzioni enterprise fornite da vendor terze parti.</p> <p>Caratteristiche: - Soluzioni enterprise complete - Supporto dedicato - Funzionalit\u00e0 avanzate</p> <p>Quando usarla: - Hai bisogno di supporto enterprise - Richiedi funzionalit\u00e0 avanzate specifiche - Budget per soluzioni commerciali</p>"},{"location":"solutions/other/#confronto-soluzioni","title":"Confronto Soluzioni","text":"Soluzione Complessit\u00e0 Costo Personalizzazione CCF Bassa Basso Limitata Azure Function Media Medio Alta Logic App Bassa Medio Media Syslog Media Basso Media Third-party Variabile Alto Variabile"},{"location":"solutions/other/#scelta-della-soluzione","title":"Scelta della Soluzione","text":"<p>Considera i seguenti fattori: - Budget disponibile - Competenze tecniche del team - Requisiti di personalizzazione - Infrastruttura esistente - Requisiti di supporto</p>"},{"location":"solutions/overview/","title":"Panoramica Soluzioni","text":"<p>Questa pagina fornisce un confronto completo di tutte le soluzioni disponibili per integrare Salesforce con Azure Sentinel.</p>"},{"location":"solutions/overview/#soluzioni-disponibili","title":"Soluzioni Disponibili","text":"<p>Il progetto offre 5 soluzioni diverse per soddisfare ogni esigenza:</p> <ol> <li>CodeLess Connector Framework (CCF) - Setup rapido, zero manutenzione</li> <li>Azure Function - Massima personalizzazione</li> <li>Azure Logic App - Low-code visuale</li> <li>Syslog + Azure Monitor Agent - Per infrastrutture esistenti</li> <li>Third-party SIEM Connector - Per soluzioni enterprise</li> </ol>"},{"location":"solutions/overview/#confronto-rapido","title":"Confronto Rapido","text":"Soluzione Complessit\u00e0 Costo Personalizzazione Setup Time CCF Bassa Basso Limitata 15-30 min Azure Function Media Medio Alta 1-2 ore Logic App Bassa Medio Media 30-60 min Syslog Media Basso Media 1-2 ore Third-party Variabile Alto Variabile Variabile"},{"location":"solutions/overview/#come-scegliere","title":"Come Scegliere","text":"<ul> <li>Scegli CCF se: Vuoi setup rapido senza codice, zero manutenzione</li> <li>Scegli Azure Function se: Hai bisogno di personalizzazione avanzata e controllo completo</li> <li>Scegli Logic App se: Preferisci un approccio visuale low-code</li> <li>Scegli Syslog se: Hai gi\u00e0 un'infrastruttura Syslog esistente</li> <li>Scegli Third-party se: Hai bisogno di supporto enterprise e funzionalit\u00e0 avanzate</li> </ul> <p>Per maggiori dettagli, consulta le pagine specifiche di ogni soluzione o il repository GitHub.</p>"}]}